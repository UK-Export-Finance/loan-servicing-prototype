{% extends "index.njk" %}
{% from "govuk/components/input/macro.njk" import govukInput %}
{% from "govuk/components/button/macro.njk" import govukButton %}
{% from "govuk/components/date-input/macro.njk" import govukDateInput %}
{% from "govuk/components/notification-banner/macro.njk" import govukNotificationBanner %}
{% from "govuk/components/summary-list/macro.njk" import govukSummaryList %}

{% from "macros/transaction-tables.njk" import transactionTables %}

{% block pageTitle -%}
  Facility
  {{ facility.streamId }}
{%- endblock %}

{% block content %}
  {% if facilityCreated %}
    {% set html %}
    <p class="govuk-notification-banner__heading">
      Facility created successfully
    </p>
    {% endset %}

    {{ govukNotificationBanner({
      html: html,
      type: 'success'
    }) }}
  {% endif %}
  <h1 class="govuk-heading-l">Facility
    {{ facility.streamId }}</h1>

  {{ govukSummaryList({
  rows: [
    {
      key: {
        text: "Facility Type"
      },
      value: {
        text: facility.facilityType
      }
    },
    {
      key: {
        text: "Obligor ID"
      },
      value: {
        text: facility.obligor
      }
    },
    {
      key: {
        text: "Facility Amount"
      },
      value: {
        text: "Â£" + facility.facilityAmount
      },
      actions: {
        items: [
          {
            href: "/facility/"+facility.streamId+"/adjustPrincipal",
            text: "Amend",
            visuallyHiddenText: "facility amount"
          }
        ]
      }
    },
    {
      key: {
        text: "Interest Strategy"
      },
      value: {
        text: facility.facilityConfig.calculateInterestStrategy.name | enumToNameString
      }
    },
    {
      key: {
        text: "Interest Rate"
      },
      value: {
        text: facility.interestRate + "%"
      },
      actions: {
        items: [
          {
            href: "/facility/"+facility.streamId+"/changeInterest",
            text: "Change",
            visuallyHiddenText: "interest rate"
          }
        ]
      }
    },
    {
      key: {
        text: "Start Date"
      },
      value: {
        text: facility.issuedEffectiveDate|parseDate
      }
    },
    {
      key: {
        text: "End Date"
      },
      value: {
        text: facility.expiryDate|parseDate
      }
    }
  ]
}) }}

  {{ transactionTables(transactionRows, eventRows) }}

{% endblock %}